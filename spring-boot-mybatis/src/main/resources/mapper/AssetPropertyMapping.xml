<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.rainsoft.msnew.dao.IAssetPropertyDao">

    <!-- 根据条件查询数据 -->
    <select id="getListByQuery" resultType="com.rainsoft.msnew.model.AssetProperty"
            parameterType="com.rainsoft.msnew.query.AssetPropertyQuery" resultMap="assetPropertyResultMap">
        select t1.id,t1.name,t1.barcode, t1.image_Url,t1.status,t1.brand_name,
        t2.caegoryname categoryName,
        t3.unitname tName,
        t4.subusername subUserName
        from
        asset_property t1
        left join tgoodscategory t2 on t1.cate_id=t2.id
        left join tmeasurementunits t3 on t1.unit_id=t3.id
        left join taccountinfo t4 on t1.company_user_id=t4.id
        <where>
            <if test="name!=null and name!=''">
                and t1.name like '%'||#{name}||'%'
            </if>
            <if test="barcode!=null and barcode!=''">
                and t1.barcode like '%'||#{barcode}||'%'
            </if>
            <if test="brandName!=null and brandName!=''">
                and t1.brand_name like '%'||#{brandName}||'%'
            </if>
            <if test="cateId!=null and cateId != -1">
                and t1.cate_id = #{cateId}
            </if>
            <if test="unitId!=null and unitId != -1">
                and t1.unit_id = #{unitId}
            </if>
            <if test="companyUserId!=null and companyUserId != -1">
                and t1.company_user_id = #{companyUserId}
            </if>
        </where>
    </select>

   <resultMap id="assetPropertyResultMap" type="com.rainsoft.msnew.model.view.VAssetPropertyEntity" >
        <id column="id" property="id" />
        <result column="name" property="name" />
        <result column="barcode" property="barcode" />
        <result column="image_Url" property="imageUrl" />
        <result column="status" property="status" />
        <result column="brand_name" property="brandName" />
        <result column="buy_Price" property="buyPrice" />
        <result column="model_Name" property="modelName" />
        <result column="categoryName" property="caegoryName" />
        <result column="tName" property="unitName" />
        <result column="subUserName" property="subUserName" />
    </resultMap>

    <!-- 根据id获取单条数据 -->
    <select id="getById" resultType="com.rainsoft.msnew.model.AssetProperty" parameterType="long" resultMap="assetPropertyResultMap">
        select t1.id,t1.name,t1.barcode, t1.image_Url,t1.status,t1.brand_name,
        t2.caegoryname categoryName,
        t3.unitname tName,
        t4.subusername subUserName
        from
        asset_property t1
        left join tgoodscategory t2 on t1.cate_id=t2.id
        left join tmeasurementunits t3 on t1.unit_id=t3.id
        left join taccountinfo t4 on t1.company_user_id=t4.id
        where t1.id=#{id}
    </select>

    <!-- 查询数据列表 -->
    <select id="getList" resultType="com.rainsoft.msnew.model.AssetProperty">
        select * from asset_property
    </select>

    <!-- 插入数据 -->
    <insert id="insert" parameterType="com.rainsoft.msnew.model.AssetProperty">
        insert into asset_property(id,name,barcode,cate_Id,status,unit_Id,image_Url,company_user_id,brand_name)
        values(seq_asset_property.nextval,#{name},#{barcode},#{goodsCategoryId},#{status},#{measurementUnitsId},'url',#{companyUserId},#{brandName})
    </insert>

    <!-- 根据id删除数据 -->
    <delete id="deleteById" parameterType="long">
        delete from asset_property where id=#{id}
    </delete>

    <!-- 修改数据 -->
    <update id="update" parameterType="com.rainsoft.msnew.model.AssetProperty">
        update asset_property set name=#{name},barcode=#{barcode},cate_Id=#{goodsCategoryId},
        status=#{status},unit_Id=#{measurementUnitsId}，brand_name=#{brandName} where id=#{id}
    </update>

</mapper>
