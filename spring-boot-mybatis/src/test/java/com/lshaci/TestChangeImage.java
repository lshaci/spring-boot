package com.lshaci;

import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import org.apache.commons.codec.binary.Base64;

public class TestChangeImage {

	public static void main(String[] args) {
		String strImg = img2Base64Str("C:/Users/Administrator/Pictures/QQ图片20170331165915.jpg");
		System.out.println(strImg);
//		String a = "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";
//		GenerateImage(a);
	}

	/**
	 *  图片转化成base64字符串
	 *  
	 *  @param imgPath 图片路径
	 */
	public static String img2Base64Str(String imgPath) {// 将图片文件转化为字节数组字符串，并对其进行Base64编码处理
		InputStream in = null;
		byte[] data = null;
		// 读取图片字节数组
		try {
			in = new FileInputStream(imgPath);
			data = new byte[in.available()];
			in.read(data);
			in.close();
		} catch (IOException e) {
			e.printStackTrace();
		}
		// 对字节数组Base64编码
		return Base64.encodeBase64String(data);// 返回Base64编码过的字节数组字符串
	}

	/**
	 * base64字符串转化成图片
	 * 
	 * @param imgStr 图片的base64字符串
	 * @param path	   生成图片存放的路劲
	 */
	public static boolean base64Str2Img(String imgStr, String path) { // 对字节数组字符串进行Base64解码并生成图片
		if (imgStr == null) // 图像数据为空
			return false;
		try {
			// Base64解码
			byte[] b = Base64.decodeBase64(imgStr);
			for (int i = 0; i < b.length; ++i) {
				if (b[i] < 0) {// 调整异常数据
					b[i] += 256;
				}
			}
			// 生成jpeg图片
			String imgFilePath = "D:/key.tar.gz";// 新生成的图片
			OutputStream out = new FileOutputStream(imgFilePath);
			out.write(b);
			out.flush();
			out.close();
			return true;
		} catch (Exception e) {
			return false;
		}
	}
}